---
layout:     post
title:      编译原理笔记
subtitle:   第五节课
date:       2019-09-16
author:     Darren
header-img: img/home-bg-o.jpg
catalog: true
tags:
    - 编译原理





---

# 编译原理笔记：词法分析

## 词法分析程序的功能

- 词法分析：根据词法规则识别及组合单词，进行词法检查。 
- 对数字常数完成数字字符串到（二进制）数值的转换。
- 删去空格字符和注解。

## 几种常用的单词内部形式： 

1. 按单词种类分类
2. 保留字和分界符采用一符一类 
3. 标识符和常数的单词值可为指示字（指针值）

由此，我们有如下两种分类方案（常用方案2）

### 方案一

| 单词名称         | 类别编码 | 单词值           |
| :--------------- | -------- | ---------------- |
| 标识符           | 1        | 内部字符串       |
| 无符号常数（整） | 2        | 整数值           |
| 无符号浮点数     | 3        | 数值             |
| 布尔常数         | 4        | 0或1             |
| 字符串常数       | 5        | 内部字符串       |
| 保留字           | 6        | 保留字或内部编码 |
| 分界符           | 7        | 分节符或内部编码 |

### 方案二

| 单词名称         | 类别编码 | 单词值     |
| ---------------- | -------- | ---------- |
| 标识符           | 1        | 内部字符串 |
| 无符号常数（整） | 2        | 整数值     |
| 无符号浮点数     | 3        | 数值       |
| 布尔常数         | 4        | 0或1       |
| 字符串常数       | 5        | 内部字符串 |
| BEGIN            | 6        | -          |
| END              | 7        | -          |
| FOR              | 8        | -          |
| DO               | 9        | -          |
| .......          | .....    | ......     |
| :                | 20       | -          |
| +                | 21       | -          |
| *                | 22       | -          |
| ，               | 23       | -          |
| （               | .....    | .......    |

## 状态图

- 由形式语言和自动机理论可知，对于用正则文法所描述的语言，可以用一种有穷（状态）自动机来识别。为了简化问题，我们用这种自动机的非形式表示，即状态图（也称状态转换图），并使用状态图来构造词法分析器。

- 左线性状态图画法（右先性状态图画法与这个不同，后续会学到）：

  ![](https://raw.githubusercontent.com/ctttt1119/ctttt1119.github.io/master/img/bianyi-5-pic1.png)

  ![](https://raw.githubusercontent.com/ctttt1119/ctttt1119.github.io/master/img/bianyi-5-pic2.png)

- **识别算法**：利用状态图可按如下步骤分析和识别字符串x： 

  1、置初始状态为当前状态，从x的最左字符开始，重复步骤2，直到x右端为止。

  2、扫描x的下一个字符，在当前状态所射出的弧中找出标记有该字符的弧，并沿此弧过渡到下一个状态； 如果找不到标有该字符的弧，那么x不是句子，过程到此结束； 如果扫描的是x的最右端字符，并从当前状态出发沿着标有该字符的弧过渡到下一个状态为终止状态Z， 则x是句子。（如果最后的一个状态不是终止状态的话，这个x也不是句子）

## 词法分析程序的设计与实现

- **再次介绍3型文法**：文法中的每一条规则都具有下述形式：U ::= t 或 U::Vt

  其中t是终结符号，而U、V是非终结符号

- 程序例子：

  ![](https://raw.githubusercontent.com/ctttt1119/ctttt1119.github.io/master/img/bianyi-5-pic3.jpg)

  ![](https://raw.githubusercontent.com/ctttt1119/ctttt1119.github.io/master/img/bianyi-5-pic4.jpg)
  
  ![](https://raw.githubusercontent.com/ctttt1119/ctttt1119.github.io/master/img/bianyi-5-pic5.jpg)